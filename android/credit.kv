#:import hex kivy.utils.get_color_from_hex

<MenuButton>:
    size_hint_x: 1                      # full width
    height: dp(60)
    font_size: "20sp"
    padding: [0, dp(15), 0, dp(15)]     # [left, top, right, bottom] padding inside
    pos_hint: {"center_x": 0.5}     # center horizontally   
    theme_text_color: 'Custom'
    text_color: hex('#ffffff')
    icon_color: hex('#ffffff')
    line_color: hex('#ffffff')
    markup: True
    
ScreenManager:
    MenuScreen:
    CreditScreen:
    VersementScreen:

<MenuScreen>:
    name: "menu"
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(20)

        # Empty space to center the button
        Widget:
            size_hint_y: 0.4

        MenuButton:
            text: "List Des Crédits"
            icon: "cash-clock"                       
            md_bg_color: hex('#e84118')
            on_release: app.change_screen("credit", "show_credits", "left")
        
        MenuButton:
            text: "List Des Versements"
            icon: "cash-register"
            md_bg_color: hex('#40739e')
            on_release: app.change_screen("versement", "show_versements", "left")

        # Empty space below
        Widget:
            size_hint_y: 0.6

# ---------------------------------------------------------
<CreditScreen>:
    name: "credit"
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(10)

        # Top bar
        MDBoxLayout:
            # title bar
            canvas.before:
                Color:
                    #rgba: hex('#ff9f1a')       # Nice yellow color
                    rgba: hex('#e84118')
                Rectangle:
                    pos: self.pos
                    size: self.size
            height: dp(60)
            size_hint_y: None

            # Return Button
            MDIconButton:
                icon: 'arrow-left-bold-outline'
                pos_hint: {'center_y': .5}
                on_release:
                    root.manager.transition.direction = "right"
                    root.manager.current = "menu"

            MDLabel:
                text: "Crédit des clients"
                halign: "center"
                valign: "top"
                bold: True
                font_style: "H5"
                font_name: '../images/fonts/Sofia-Regular.ttf'

        MDTextField:
            id: search_credit
            mode: "rectangle"
            md_bg_color: app.theme_cls.primary_light
            hint_text: "Recherche..."
            icon_left: "magnify"
            on_text: root.filter_credits(self.text)

        BoxLayout:
            id: credit_table_box
            orientation: "vertical"


# ---------------------------------------------------------
<VersementScreen>:
    name: "versement"
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: dp(10)

        # Top bar
        MDBoxLayout:
            # title bar
            canvas.before:
                Color:
                    #rgba: hex('#ff9f1a')
                    rgba: hex('#40739e')
                Rectangle:
                    pos: self.pos
                    size: self.size
            height: dp(60)
            size_hint_y: None

            # Return Button
            MDIconButton:
                icon: 'arrow-left-bold-outline'
                pos_hint: {'center_y': .5}
                on_release:
                    root.manager.transition.direction = "right"
                    root.manager.current = "menu"

            MDLabel:
                text: "Versements des Clients"
                halign: "center"
                bold: True
                valign: "top"
                font_style: "H5"
                font_name: '../images/fonts/Sofia-Regular.ttf'

        MDTextField:
            id: search_versement
            hint_text: "Recherche..."
            icon_left: "magnify"
            on_text: root.search_versement(self.text)

        BoxLayout:
            id: versement_table_box
            orientation: "vertical"
